language: node_js
node_js:
  - "10"

before_script:
  - npm install -g firebase-tools
script:
  # build web
  - cd /builds/kvasbo/tellulf-client
  - yarn install --non-interactive --pure-lockfile
  - CI=false yarn run build
  # build functions
  - cd /builds/kvasbo/tellulf-client/functions
  - yarn install --non-interactive --pure-lockfile
  # deploy
  - cd /builds/kvasbo/tellulf-client
  # - firebase deploy -m "Pipeline $CI_PIPELINE_ID, build $CI_BUILD_ID" --non-interactive --token $FIREBASE_DEPLOY_KEY